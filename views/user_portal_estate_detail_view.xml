<odoo>
    <template id="user_portal_estate_detail_view" name="Property Detail">
        <t t-call="portal.portal_layout">
            <t t-set="title">
                Property: <t t-esc="property.name"/>
            </t>
            <div class="container">
                <t t-set="icon" t-value="'/account/static/src/img/castle.jpg'" />
                
                <div class="row align-items-start">
                    <!-- Left Column-->
                    <div class="col-md-4">
                        <img t-att-src="icon" alt="Castle" style="width:100%; max-width:250px; height:auto;" />
                        <div class="mt-3">
                            <t t-foreach="property.property_tag_id" t-as="tag">
                                <span class="badge bg-secondary me-1">
                                    <t t-esc="tag.name"/>
                                </span>
                            </t>
                        </div>
                    </div>

                    <!-- Right Column -->
                    <div class="col-md-8">
                        <h2><t t-esc="property.name"/></h2>
                        <p><strong>Type:</strong> <t t-esc="property.property_type_id.name or 'N/A'"/></p>
                        <p><strong>Postcode:</strong> <t t-esc="property.postcode or 'N/A'"/></p>
                        <p><strong>Living Area:</strong> <t t-esc="property.living_area"/> m²</p>
                        <p><strong>Garden Area:</strong> <t t-esc="property.garden_area"/> m²</p>
                        <p><strong>Expected Price:</strong> <t t-esc="property.expected_price"/> $</p>
                        <p><strong>Availability:</strong> <t t-esc="property.date_availability"/></p>
                        <p><strong>Status:</strong> <t t-esc="property.state"/></p>
                        <p><strong>Highest Offer:</strong> <t t-esc="property.best_offer"/> $</p>
                        <p><strong>My Offer:</strong>
                            <t t-set="my_offer" t-value="False"/>
                            <t t-foreach="property.property_offer_ids" t-as="offer">
                                <t t-if="offer.partner_id.id == partner.id">
                                    <t t-set="my_offer" t-value="offer.price"/>
                                </t>
                            </t>
                            <t t-if="my_offer">
                                <t t-esc="my_offer"/> $
                            </t>
                            <t t-if="not my_offer">
                                No offer yet
                            </t>
                        </p>
                    </div>
                </div>

                <hr/>
            </div>
            <!-- Make an Offer Section -->
            <div class="container">
                <button class="btn btn-primary mb-3" type="button" data-bs-toggle="collapse" data-bs-target="#offerForm"
                    aria-expanded="false" aria-controls="offerForm">
                    Make an Offer
                </button>

                <div class="collapse" id="offerForm">
                    <form t-att-action="'/my/estate/%s/offer' % property.id" method="post" class="border p-3 rounded">                       
                        <div class="mb-3">
                            <label for="price" class="form-label">Your Offer ($):</label>
                            <input type="number" min="1" class="form-control" id="price" name="price"  />
                        </div>
                        <button type="submit" class="btn btn-success">Submit Offer</button>
                    </form>
                </div>
            </div>
            <div>
                <button class="btn btn-secondary mb-2" type="button" onclick="window.location.href='/my/estate-available'">Back</button>
            </div>
        </t>
    </template>
</odoo>
